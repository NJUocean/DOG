        -:    0:Source:1827.c
        -:    0:Graph:1827.gcno
        -:    0:Data:1827.gcda
        -:    0:Runs:1
        -:    1:/* PR target/59003 */
        -:    2:/* { dg-options "-O2" } */
        -:    3:/* { dg-options "-O2 -mtune=amdfam10" { target i?86-*-* x86_64-*-* } } */
        -:    4:/* { dg-options "-O2 -fno-common" { target hppa*-*-hpux* } } */
        -:    5:
   100001:    6:__attribute__((noinline, noclone)) void *foo(void *p, unsigned int q) {
   100001:    7:  return __builtin_memset(p, 0, q * 4UL);
        -:    8:}
        -:    9:
        -:   10:char buf[128] __attribute__((aligned(32)));
        -:   11:
        1:   12:int main() {
        -:   13:  int i;
   100001:   14:  for (i = 0; i < 100000; i++)
   100000:   15:    foo(buf + 4, 1 + (i & 1));
      129:   16:  for (i = 0; i < 128; i++) {
      128:   17:    buf[i] = 'X';
      128:   18:    asm volatile("" : : : "memory");
        -:   19:  }
        1:   20:  foo(buf + 32, 7);
      129:   21:  for (i = 0; i < 128; i++)
      128:   22:    if (buf[i] != ((i < 32 || i >= 32 + 28) ? 'X' : 0))
    #####:   23:      __builtin_abort();
        1:   24:  return 0;
        -:   25:}
