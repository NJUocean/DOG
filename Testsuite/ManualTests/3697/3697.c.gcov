        -:    0:Source:3697.c
        -:    0:Graph:3697.gcno
        -:    0:Data:3697.gcda
        -:    0:Runs:1
        -:    1:/* PR45070 */
        -:    2:extern void abort(void);
        -:    3:
        -:    4:struct packed_ushort {
        -:    5:  unsigned short ucs;
        -:    6:} __attribute__((packed));
        -:    7:
        -:    8:struct source {
        -:    9:  int pos, length;
        -:   10:  int flag;
        -:   11:};
        -:   12:
        1:   13:static void __attribute__((noinline)) fetch(struct source *p) {
        1:   14:  p->length = 128;
        1:   15:}
        -:   16:
       17:   17:static struct packed_ushort __attribute__((noinline)) next(struct source *p) {
        -:   18:  struct packed_ushort rv;
        -:   19:
       17:   20:  if (p->pos >= p->length) {
        2:   21:    if (p->flag) {
        1:   22:      p->flag = 0;
        1:   23:      fetch(p);
        1:   24:      return next(p);
        -:   25:    }
        1:   26:    p->flag = 1;
        1:   27:    rv.ucs = 0xffff;
        1:   28:    return rv;
        -:   29:  }
       15:   30:  rv.ucs = 0;
       15:   31:  return rv;
        -:   32:}
        -:   33:
        1:   34:int main(void) {
        -:   35:  struct source s;
        -:   36:  int i;
        -:   37:
        1:   38:  s.pos = 0;
        1:   39:  s.length = 0;
        1:   40:  s.flag = 0;
        -:   41:
       17:   42:  for (i = 0; i < 16; i++) {
       16:   43:    struct packed_ushort rv = next(&s);
       16:   44:    if ((i == 0 && rv.ucs != 0xffff) || (i > 0 && rv.ucs != 0))
    #####:   45:      abort();
        -:   46:  }
        1:   47:  return 0;
        -:   48:}
