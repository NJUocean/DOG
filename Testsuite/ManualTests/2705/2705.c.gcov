        -:    0:Source:2705.c
        -:    0:Graph:2705.gcno
        -:    0:Data:2705.gcda
        -:    0:Runs:1
        -:    1:/* __builtin_ms_va_list is only supported for -m64.  */
        -:    2:/* { dg-do run { target lp64 } } */
        -:    3:/* { dg-require-effective-target lto } */
        -:    4:/* { dg-options "-flto" } */
        -:    5:
        -:    6:#include <stdio.h>
        -:    7:
        1:    8:int __attribute__((ms_abi)) foo(int n, ...) {
        -:    9:  __builtin_ms_va_list ap;
        1:   10:  int sum = 0;
        -:   11:
        1:   12:  __builtin_ms_va_start(ap, n);
        -:   13:
       11:   14:  while (n--) {
       10:   15:    sum += __builtin_va_arg(ap, int);
       10:   16:    printf("sum = %d\n", sum);
        -:   17:  }
        -:   18:
        1:   19:  __builtin_ms_va_end(ap);
        -:   20:
        1:   21:  return sum;
        -:   22:}
        -:   23:
        1:   24:int main(void) {
        1:   25:  int res = foo(10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
        -:   26:
        1:   27:  if (res != 55)
    #####:   28:    __builtin_abort();
        -:   29:
        1:   30:  return 0;
        -:   31:}
