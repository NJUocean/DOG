        -:    0:Source:1004.c
        -:    0:Graph:1004.gcno
        -:    0:Data:1004.gcda
        -:    0:Runs:1
        -:    1:/* Test that stack protection is done on chosen functions. */
        -:    2:
        -:    3:/* { dg-do compile { target i?86-*-* x86_64-*-* rs6000-*-* s390x-*-* } } */
        -:    4:/* { dg-options "-O2 -fstack-protector-all" } */
        -:    5:
        -:    6:/* This test checks the presence of __stack_chk_fail function in assembler.
        -:    7: * Compiler generates _stack_chk_fail_local (wrapper) calls instead for PIC.
        -:    8: */
        -:    9:/* { dg-require-effective-target nonpic } */
        -:   10:
        1:   11:static int foo() { return 0; }
        -:   12:
        -:   13:#pragma GCC push_options
        -:   14:#pragma GCC optimize("-fno-stack-protector")
        -:   15:
        1:   16:int main() { foo(); }
        -:   17:
        -:   18:#pragma GCC pop_options
        -:   19:
        -:   20:/* { dg-final { scan-assembler-times "stack_chk_fail" 0 } } */
