        -:    0:Source:3442.c
        -:    0:Graph:3442.gcno
        -:    0:Data:3442.gcda
        -:    0:Runs:1
        -:    1:/* PR c++/34459 */
        -:    2:
        -:    3:extern void abort(void);
        -:    4:extern void *memset(void *s, int c, __SIZE_TYPE__ n);
        -:    5:
        -:    6:struct S {
        -:    7:  char s[25];
        -:    8:};
        -:    9:
        -:   10:struct S *p;
        -:   11:
        9:   12:void __attribute__((noinline, noclone)) foo(struct S *x, int set) {
        -:   13:  int i;
      234:   14:  for (i = 0; i < sizeof(x->s); ++i)
      225:   15:    if (x->s[i] != 0)
    #####:   16:      abort();
      225:   17:    else if (set)
       75:   18:      x->s[i] = set;
        9:   19:  p = x;
        9:   20:}
        -:   21:
        1:   22:void __attribute__((noinline, noclone)) test1(void) {
        -:   23:  struct S a;
        1:   24:  memset(&a.s, '\0', sizeof(a.s));
        1:   25:  foo(&a, 0);
        1:   26:  struct S b = a;
        1:   27:  foo(&b, 1);
        1:   28:  b = a;
        1:   29:  b = b;
        1:   30:  foo(&b, 0);
        1:   31:}
        -:   32:
        1:   33:void __attribute__((noinline, noclone)) test2(void) {
        -:   34:  struct S a;
        1:   35:  memset(&a.s, '\0', sizeof(a.s));
        1:   36:  foo(&a, 0);
        1:   37:  struct S b = a;
        1:   38:  foo(&b, 1);
        1:   39:  b = a;
        1:   40:  b = *p;
        1:   41:  foo(&b, 0);
        1:   42:}
        -:   43:
        1:   44:void __attribute__((noinline, noclone)) test3(void) {
        -:   45:  struct S a;
        1:   46:  memset(&a.s, '\0', sizeof(a.s));
        1:   47:  foo(&a, 0);
        1:   48:  struct S b = a;
        1:   49:  foo(&b, 1);
        1:   50:  *p = a;
        1:   51:  *p = b;
        1:   52:  foo(&b, 0);
        1:   53:}
        -:   54:
        1:   55:int main(void) {
        1:   56:  test1();
        1:   57:  test2();
        1:   58:  test3();
        1:   59:  return 0;
        -:   60:}
