        -:    0:Source:2554.c
        -:    0:Graph:2554.gcno
        -:    0:Data:2554.gcda
        -:    0:Runs:1
        -:    1:/* PR target/5755
        -:    2:   This testcase failed because the caller of a function returning struct
        -:    3:   expected the callee to pop up the hidden return structure pointer,
        -:    4:   while callee was actually not poping it up (as the hidden argument
        -:    5:   was passed in register).  */
        -:    6:/* { dg-do run } */
        -:    7:/* { dg-options "-O2 -fomit-frame-pointer" } */
        -:    8:
        -:    9:extern void abort(void);
        -:   10:extern void exit(int);
        -:   11:
        -:   12:typedef struct {
        -:   13:  int a1, a2;
        -:   14:} A;
        -:   15:
        -:   16:A a;
        -:   17:
        1:   18:A __attribute__((regparm(2))) foo(int x) { return a; }
        -:   19:
        1:   20:int __attribute__((regparm(2))) bar(int x) {
        1:   21:  int r = foo(0).a2;
        1:   22:  return r;
        -:   23:}
        -:   24:
        1:   25:int main() {
        -:   26:  int f;
        1:   27:  a.a1 = 530;
        1:   28:  a.a2 = 980;
        1:   29:  f = bar(0);
        1:   30:  if (f != 980)
    #####:   31:    abort();
        1:   32:  exit(0);
        -:   33:}
