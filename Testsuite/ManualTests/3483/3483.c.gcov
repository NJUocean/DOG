        -:    0:Source:3483.c
        -:    0:Graph:3483.gcno
        -:    0:Data:3483.gcda
        -:    0:Runs:1
        -:    1:typedef unsigned long long uint64_t;
        -:    2:void f(uint64_t *a, uint64_t aa) __attribute__((noinline));
        1:    3:void f(uint64_t *a, uint64_t aa) {
        1:    4:  uint64_t new_value = aa;
        1:    5:  uint64_t old_value = *a;
        1:    6:  int bit_size = 32;
        1:    7:  uint64_t mask = (uint64_t)(unsigned)(-1);
        1:    8:  uint64_t tmp = old_value & mask;
        1:    9:  new_value &= mask;
        -:   10:  /* On overflow we need to add 1 in the upper bits */
        1:   11:  if (tmp > new_value)
    #####:   12:    new_value += 1ull << bit_size;
        -:   13:  /* Add in the upper bits from the old value */
        1:   14:  new_value += old_value & ~mask;
        1:   15:  *a = new_value;
        1:   16:}
        1:   17:int main(void) {
        -:   18:  uint64_t value, new_value, old_value;
        1:   19:  value = 0x100000001;
        1:   20:  old_value = value;
        1:   21:  new_value = (value + 1) & (uint64_t)(unsigned)(-1);
        1:   22:  f(&value, new_value);
        1:   23:  if (value != old_value + 1)
    #####:   24:    __builtin_abort();
        1:   25:  return 0;
        -:   26:}
