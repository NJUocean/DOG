        -:    0:Source:1806.c
        -:    0:Graph:1806.gcno
        -:    0:Data:1806.gcda
        -:    0:Runs:1
        -:    1:/* PR target/12865 */
        -:    2:/* Origin: Waldek Hebisch <hebisch@math.uni.wroc.pl> */
        -:    3:
        -:    4:/* { dg-do run } */
        -:    5:/* { dg-require-effective-target trampolines } */
        -:    6:/* { dg-options "-O2" } */
        -:    7:
        -:    8:/* This used to fail on various versions of Solaris 2 because the
        -:    9:   trampoline couldn't be made executable.  */
        -:   10:
        -:   11:extern void abort(void);
        -:   12:extern double fabs(double);
        -:   13:
        1:   14:void foo(void) {
        1:   15:  const int correct[1100] = {1, 0, -2, 0, 1, 0, 1, -1, -10, -30, -67};
        -:   16:  int i;
        -:   17:
      128:   18:  double x1(void) { return 1; }
      151:   19:  double x2(void) { return -1; }
      187:   20:  double x3(void) { return -1; }
      103:   21:  double x4(void) { return 1; }
        1:   22:  double x5(void) { return 0; }
        -:   23:
        -:   24:  typedef double pfun(void);
        -:   25:
     1390:   26:  double a(int k, pfun x1, pfun x2, pfun x3, pfun x4, pfun x5) {
     1379:   27:    double b(void) {
     1379:   28:      k = k - 1;
     1379:   29:      return a(k, b, x1, x2, x3, x4);
        -:   30:    }
        -:   31:
     1390:   32:    if (k <= 0)
      559:   33:      return x4() + x5();
        -:   34:    else
      831:   35:      return b();
        -:   36:  }
        -:   37:
       12:   38:  for (i = 0; i <= 10; i++) {
       11:   39:    if (fabs(a(i, x1, x2, x3, x4, x5) - correct[i]) > 0.1)
    #####:   40:      abort();
        -:   41:  }
        1:   42:}
        -:   43:
        1:   44:int main(void) {
        1:   45:  foo();
        1:   46:  return 0;
        -:   47:}
