        -:    0:Source:4071.c
        -:    0:Graph:4071.gcno
        -:    0:Data:4071.gcda
        -:    0:Runs:1
        -:    1:/* Copyright (C) 2002  Free Software Foundation
        -:    2:
        -:    3:   Check that constant folding of shift operations is working.
        -:    4:
        -:    5:   Roger Sayle, 10th October 2002.  */
        -:    6:
        -:    7:extern void abort(void);
        -:    8:extern void link_error(void);
        -:    9:
        2:   10:void utest(unsigned int x) {
        -:   11:  if (x >> 0 != x)
        -:   12:    link_error();
        -:   13:
        -:   14:  if (x << 0 != x)
        -:   15:    link_error();
        -:   16:
        -:   17:  if (0 << x != 0)
        -:   18:    link_error();
        -:   19:
        -:   20:  if (0 >> x != 0)
        -:   21:    link_error();
        -:   22:
        -:   23:  if (-1 >> x != -1)
        -:   24:    link_error();
        -:   25:
        -:   26:  if (~0 >> x != ~0)
        -:   27:    link_error();
        2:   28:}
        -:   29:
        2:   30:void stest(int x) {
        -:   31:  if (x >> 0 != x)
        -:   32:    link_error();
        -:   33:
        -:   34:  if (x << 0 != x)
        -:   35:    link_error();
        -:   36:
        -:   37:  if (0 << x != 0)
        -:   38:    link_error();
        -:   39:
        -:   40:  if (0 >> x != 0)
        -:   41:    link_error();
        2:   42:}
        -:   43:
        1:   44:int main() {
        1:   45:  utest(9);
        1:   46:  utest(0);
        -:   47:
        1:   48:  stest(9);
        1:   49:  stest(0);
        -:   50:
        1:   51:  return 0;
        -:   52:}
        -:   53:
        -:   54:#ifndef __OPTIMIZE__
    #####:   55:void link_error() { abort(); }
        -:   56:#endif
