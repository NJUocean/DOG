        -:    0:Source:1869.c
        -:    0:Graph:1869.gcno
        -:    0:Data:1869.gcda
        -:    0:Runs:1
        -:    1:/* { dg-do run } */
        -:    2:/* { dg-options "-O2" } */
        -:    3:
        -:    4:/* Ensure that BIT_FIELD_REFs gets the appropriate VUSE.
        -:    5:   Contributed by Paolo Bonzini  <bonzini@gnu.org>.
        -:    6:
        -:    7:   This testcase actually never triggered in the CVS repo, but it did
        -:    8:   in my local tree and it seems worth testing.  In this test, the if's
        -:    9:   are folded to BIT_FIELD_REFs but the VUSEs were erroneously left out.
        -:   10:   Therefore, DOM did not see that i was modified between the two ifs
        -:   11:   and optimized away the second if.  */
        -:   12:
        -:   13:extern void abort(void);
        -:   14:extern void exit(int);
        -:   15:
        -:   16:struct x {
        -:   17:  unsigned b : 1;
        -:   18:  unsigned c : 1;
        -:   19:};
        -:   20:
        -:   21:struct x i = {1, 1};
        -:   22:
        1:   23:int main() {
        1:   24:  i.b = 1;
        1:   25:  if (i.b == 1 && i.c == 0)
    #####:   26:    exit(0);
        1:   27:  i.c = 0;
        1:   28:  if (i.b == 1 && i.c == 0)
        1:   29:    exit(0);
    #####:   30:  abort();
        -:   31:}
