        -:    0:Source:1399.c
        -:    0:Graph:1399.gcno
        -:    0:Data:1399.gcda
        -:    0:Runs:1
        -:    1:/* PR rtl-optimization/52060 */
        -:    2:/* { dg-do run { target int32plus } } */
        -:    3:
        -:    4:extern void abort(void);
        -:    5:union U {
        -:    6:  float f;
        -:    7:  unsigned int i;
        -:    8:};
        -:    9:
        -:   10:static inline __attribute__((always_inline)) unsigned int foo(float x) {
        -:   11:  union U u;
        -:   12:  unsigned int a, b, c;
        -:   13:  int d;
        -:   14:  int e;
        1:   15:  u.f = x;
        1:   16:  d = ((unsigned)u.i >> 23) & 0xFF;
       1*:   17:  c = d < 126 ? 0 : ~0;
        1:   18:  e = 127 + 30 - d;
        1:   19:  a = (u.i << 8) | 0x80000000U;
        1:   20:  b = a & ((1 << e) - 1);
        1:   21:  a = a >> e;
       1*:   22:  c &= (b | (a & 2)) ? ~0 : ~1;
        1:   23:  a = ((a + 1U) >> 1) & c;
        1:   24:  return a;
        -:   25:}
        -:   26:
        1:   27:__attribute__((noinline)) unsigned int bar(float x) {
        -:   28:  unsigned int a, b, c;
        -:   29:  static const unsigned int d[128] = {
        -:   30:      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        -:   31:      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        -:   32:      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,
        -:   33:      1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
        -:   34:      1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        -:   35:      2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 6, 7};
        1:   36:  a = foo(1048575.0f * x);
        1:   37:  c = d[a >> 13];
        1:   38:  b = (c << 13) | ((a >> (7 - c)) & 0x1fff);
        1:   39:  return b;
        -:   40:}
        -:   41:
        1:   42:int main() {
        -:   43:  union U u;
        1:   44:  u.f = 1048575.0f;
        1:   45:  if (sizeof(u.i) == sizeof(u.f) && u.i == 0x497ffff0U && bar(1.0f) != 65535)
    #####:   46:    abort();
        1:   47:  return 0;
        -:   48:}
