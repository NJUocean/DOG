        -:    0:Source:2580.c
        -:    0:Graph:2580.gcno
        -:    0:Data:2580.gcda
        -:    0:Runs:1
        -:    1:/* Test asm clobbers on x86. */
        -:    2:
        -:    3:/* { dg-do run } */
        -:    4:
        -:    5:extern void abort(void);
        -:    6:
        1:    7:int main() {
        -:    8:  int i;
        1:    9:  __asm__("movl $1,%0\n\txorl %%eax,%%eax" : "=r"(i) : : "eax");
        1:   10:  if (i != 1)
    #####:   11:    abort();
        -:   12:    /* On darwin you can't call external functions from non-pic code,
        -:   13:       however, clobbering ebx isn't valid in pic code. Instead of
        -:   14:       disabling the whole test, just disable the ebx clobbering part.
        -:   15:       Ditto for any x86 system that is ilp32 && pic.
        -:   16:    */
        -:   17:#if !(defined(__MACH__))
        -:   18:#if !defined(__PIC__) || defined(__x86_64__)
        1:   19:  __asm__("movl $1,%0\n\txorl %%ebx,%%ebx" : "=r"(i) : : "ebx");
        1:   20:  if (i != 1)
    #####:   21:    abort();
        -:   22:#endif /* ! pic || lp64 */
        -:   23:#endif
        1:   24:  __asm__("movl $1,%0\n\txorl %%ecx,%%ecx" : "=r"(i) : : "ecx");
        1:   25:  if (i != 1)
    #####:   26:    abort();
        1:   27:  __asm__("movl $1,%0\n\txorl %%edx,%%edx" : "=r"(i) : : "edx");
        1:   28:  if (i != 1)
    #####:   29:    abort();
        1:   30:  __asm__("movl $1,%0\n\txorl %%esi,%%esi" : "=r"(i) : : "esi");
        1:   31:  if (i != 1)
    #####:   32:    abort();
        1:   33:  __asm__("movl $1,%0\n\txorl %%edi,%%edi" : "=r"(i) : : "edi");
        1:   34:  if (i != 1)
    #####:   35:    abort();
        1:   36:  return 0;
        -:   37:}
